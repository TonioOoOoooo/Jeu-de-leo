<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="screen-orientation" content="landscape">
    <title>L'Aventure de LÃ©o - Version 2.0</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <!-- START SCREEN -->
    <div id="start-screen" class="screen">
        <h1 class="game-title">ğŸ¦¸ L'Aventure de LÃ©o</h1>
        <p class="subtitle">Un jeu de plateforme Ã©pique en 10 niveaux !</p>
        
        <div id="saved-game" style="display: none;">
            <p>ğŸ“ Partie sauvegardÃ©e trouvÃ©e !</p>
            <p id="saved-info"></p>
            <button class="big-btn btn-continue" onclick="continueSavedGame()">â–¶ï¸ CONTINUER</button>
        </div>
        
        <p style="font-size: 22px; color: rgba(255,255,255,0.9); margin-top: 20px;">Nouvelle partie - Choisis ta difficultÃ© :</p>

        <div class="difficulty-container">
            <button class="big-btn btn-very-easy" data-start="very_easy">ğŸŒˆ TRÃˆS FACILE</button>
            <button class="big-btn btn-easy" data-start="easy">ğŸ˜Š FACILE</button>
            <button class="big-btn btn-medium" data-start="medium">ğŸ˜ MOYEN</button>
            <button class="big-btn btn-hard" data-start="hard">ğŸ˜ˆ DUR</button>
        </div>

        <p style="font-size: 14px; color: rgba(255,255,255,0.6); margin-top: 10px; max-width: 600px; margin-left: auto; margin-right: auto;">
            <strong>ğŸŒˆ TRÃˆS FACILE:</strong> 10 vies, ennemis trÃ¨s lents, aide du compagnon !<br>
            <strong>FACILE:</strong> 7 vies, ennemis lents, hitbox tolÃ©rante<br>
            <strong>MOYEN:</strong> 4 vies, difficultÃ© standard<br>
            <strong>DUR:</strong> 2 vies, ennemis rapides, aucune tolÃ©rance !
        </p>

        <div class="options">
            <div class="option-toggle">
                <span>ğŸ”Š Sons</span>
                <button class="option-button" id="sound-button" onclick="toggleSound()">ğŸ”Š Son: ON</button>
            </div>
            <div class="option-toggle">
                <span>â±ï¸ Timer</span>
                <div class="toggle-switch" id="timer-toggle" onclick="toggleTimer()"></div>
            </div>
            <div class="option-toggle" id="fullscreen-option">
                <span>ğŸ“º Ã‰cran</span>
                <button class="option-button" id="fullscreen-button" onclick="toggleFullscreen()">ğŸ“º Plein Ã©cran</button>
            </div>
        </div>
        
        <div class="options" style="margin-top: 20px;">
            <button class="big-btn btn-pause" onclick="showCustomization()">ğŸ¨ Personnaliser</button>
            <button class="big-btn btn-continue" onclick="showStats()">ğŸ“Š Stats</button>
            <button class="big-btn" style="background: #e67e22;" onclick="showBadges()">ğŸ† Badges</button>
        </div>

        <p style="margin-top: 20px; color: rgba(255,255,255,0.7); font-size: 14px;">
            <strong>Clavier AZERTY :</strong> A/Z pour bouger | ESPACE ou â†‘ pour sauter | â†‘â†“ pour Ã©chelles<br>
            Ã‰CHAP pour pause | <em>Cheats : 1-9 = niveau, + = niveau suivant, - = niveau prÃ©cÃ©dent, = ou ENTRÃ‰E (pavÃ© num.) = vie supplÃ©mentaire</em>
        </p>
    </div>

    <!-- CUSTOMIZATION SCREEN -->
    <div id="customization-screen" class="screen" style="display: none; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
        <h2 style="font-size: 48px; color: white; margin: 0;">ğŸ¨ Personnalisation</h2>
        <p style="color: rgba(255,255,255,0.9); font-size: 20px;">Choisis ta couleur prÃ©fÃ©rÃ©e !</p>

        <div style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; justify-content: center;">
            <button class="color-btn" data-color="#3498db" style="background: #3498db;">ğŸ’™ Bleu</button>
            <button class="color-btn" data-color="#e74c3c" style="background: #e74c3c;">â¤ï¸ Rouge</button>
            <button class="color-btn" data-color="#2ecc71" style="background: #2ecc71;">ğŸ’š Vert</button>
            <button class="color-btn" data-color="#9b59b6" style="background: #9b59b6;">ğŸ’œ Violet</button>
            <button class="color-btn" data-color="#f39c12" style="background: #f39c12;">ğŸ§¡ Orange</button>
            <button class="color-btn" data-color="#1abc9c" style="background: #1abc9c;">ğŸ’ Turquoise</button>
            <button class="color-btn" data-color="#e91e63" style="background: #e91e63;">ğŸ’— Rose</button>
            <button class="color-btn" data-color="#00bcd4" style="background: #00bcd4;">ğŸ©µ Cyan</button>
        </div>

        <div style="margin-top: 30px;">
            <p style="color: white; font-size: 18px;">Choisis ton compagnon :</p>
            <div style="display: flex; gap: 15px; margin-top: 10px; justify-content: center;">
                <button class="companion-btn" data-companion="cat" data-name="Minou">ğŸ± Chat</button>
                <button class="companion-btn" data-companion="dog" data-name="Toutou">ğŸ¶ Chien</button>
                <button class="companion-btn" data-companion="bird" data-name="Piou">ğŸ¦ Oiseau</button>
                <button class="companion-btn" data-companion="rabbit" data-name="Lapinou">ğŸ° Lapin</button>
            </div>
        </div>

        <div id="customization-preview" style="margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.2); border-radius: 15px;">
            <p style="color: white; font-size: 16px;">AperÃ§u : <span id="preview-color">Bleu</span> avec <span id="preview-companion">ğŸ± Minou</span></p>
        </div>

        <button class="big-btn btn-continue" style="margin-top: 20px;" onclick="closeCustomization()">âœ… C'est bon !</button>
    </div>

    <!-- BADGES SCREEN -->
    <div id="badges-screen" class="screen" style="display: none; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
        <h2 style="font-size: 48px; color: white; margin: 0;">ğŸ† Mes Badges</h2>
        <p style="color: rgba(255,255,255,0.9); font-size: 18px;">Collectionne tous les badges !</p>

        <div id="badges-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 20px; max-width: 600px;">
            <!-- Badges will be inserted here by JavaScript -->
        </div>

        <button class="big-btn btn-continue" style="margin-top: 30px;" onclick="closeBadges()">â¬…ï¸ Retour</button>
    </div>

    <!-- STATS SCREEN -->
    <div id="stats-screen" class="screen" style="display: none; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
        <h2 style="font-size: 48px; color: white; margin: 0;">ğŸ“Š Statistiques</h2>
        <p style="color: rgba(255,255,255,0.9); font-size: 18px;">Tes exploits de champion !</p>

        <div id="stats-container" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; max-width: 500px;">
            <!-- Stats will be inserted here by JavaScript -->
        </div>

        <button class="big-btn btn-continue" style="margin-top: 30px;" onclick="closeStats()">â¬…ï¸ Retour</button>
    </div>

    <!-- COMPANION DISPLAY (in-game) -->
    <div id="companion-bubble" style="display: none; position: fixed; bottom: 150px; left: 20px; background: white; padding: 15px 20px; border-radius: 20px; border: 3px solid #333; max-width: 280px; z-index: 999; font-size: 18px; box-shadow: 0 8px 25px rgba(0,0,0,0.3); pointer-events: none;">
        <div id="companion-icon" style="font-size: 40px; margin-bottom: 8px;">ğŸ±</div>
        <div id="companion-text" style="color: #333; line-height: 1.4;">Salut LÃ©o ! Tu vas y arriver !</div>
    </div>

    <!-- MATH MINI-GAME (Bonus between levels) -->
    <div id="math-game" class="screen" style="display: none; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
        <h2 style="font-size: 42px; color: #333; margin: 0;">ğŸ§® Quiz Bonus !</h2>
        <p style="color: #555; font-size: 18px;">RÃ©ponds pour gagner des piÃ¨ces bonus !</p>

        <div style="background: white; padding: 30px 50px; border-radius: 20px; margin-top: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
            <p id="math-question" style="font-size: 48px; color: #333; margin: 0;">5 + 3 = ?</p>
        </div>

        <div id="math-answers" style="display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; justify-content: center;">
            <!-- RÃ©ponses gÃ©nÃ©rÃ©es par JavaScript -->
        </div>

        <div id="math-result" style="margin-top: 20px; font-size: 24px; color: #333; min-height: 40px;"></div>

        <button id="math-skip" class="big-btn btn-medium" style="margin-top: 20px;" onclick="skipMathGame()">Passer â­ï¸</button>
    </div>

    <!-- STREAK INDICATOR -->
    <div id="streak-indicator">ğŸ”¥ SÃ©rie : <span id="streak-count">0</span></div>

    <!-- PAUSE SCREEN -->
    <div id="pause-screen" class="screen">
        <h2 style="font-size: 50px; color: white; margin: 0;">â¸ï¸ PAUSE</h2>
        <p style="font-size: 24px; color: rgba(255,255,255,0.8);">Niveau <span id="pause-level">1</span></p>
        
        <div class="difficulty-container" style="margin-top: 30px;">
            <button class="big-btn btn-continue" onclick="resumeGame()">â–¶ï¸ REPRENDRE</button>
            <button class="big-btn btn-easy" onclick="restartLevel()">ğŸ”„ RECOMMENCER</button>
            <button class="big-btn btn-hard" onclick="quitToMenu()">ğŸ  MENU</button>
        </div>
        
        <p style="margin-top: 30px; color: rgba(255,255,255,0.5);">(Ã‰CHAP pour reprendre)</p>
    </div>

    <!-- TRANSITION SCREEN -->
    <div id="transition-screen" class="screen">
        <h2 id="transition-text" style="font-size: 50px; color: white;">NIVEAU 2</h2>
    </div>

    <!-- UI LAYER -->
    <div id="ui-layer">
        <div id="hud">
            <span id="level-display">NIVEAU 1</span>
            <span id="coins-display">ğŸª™ 0</span>
            <span id="stars-display">â­ 0</span>
            <span id="hearts">â¤ï¸â¤ï¸â¤ï¸</span>
            <span id="key-display">ğŸ—ï¸ CLÃ‰ !</span>
            <button id="menu-button" onclick="togglePause()" title="Menu (Ã‰chap)">â¸ï¸ MENU</button>
        </div>
        
        <div id="timer-display">â±ï¸ 00:00</div>
        
        <div id="progress-bar"></div>
        
        <div id="jump-indicator">
            <div class="jump-dot available" id="jump1"></div>
            <div class="jump-dot available" id="jump2"></div>
            <div class="jump-dot available" id="jump3" style="display: none;"></div>
        </div>
        
        <div id="tutorial">
            <h3>ğŸ® Comment jouer</h3>

            <div class="tutorial-step active" id="tutorial-step-1">
                <p class="tutorial-arrow">ğŸ‘‰</p>
                <p><strong>Appuie sur A</strong> pour aller Ã  gauche</p>
                <p><strong>Appuie sur Z</strong> pour aller Ã  droite</p>
                <button onclick="nextTutorialStep(2)">Suivant â¡ï¸</button>
            </div>

            <div class="tutorial-step" id="tutorial-step-2">
                <p style="font-size: 40px;">ğŸ¦˜</p>
                <p><strong>ESPACE</strong> = Sauter !</p>
                <p>Tu peux sauter <strong>2 fois</strong> de suite !</p>
                <button onclick="nextTutorialStep(3)">Suivant â¡ï¸</button>
            </div>

            <div class="tutorial-step" id="tutorial-step-3">
                <p style="font-size: 40px;">ğŸªœ</p>
                <p>Utilise <strong>â†‘ â†“</strong> pour les Ã©chelles</p>
                <button onclick="nextTutorialStep(4)">Suivant â¡ï¸</button>
            </div>

            <div class="tutorial-step" id="tutorial-step-4">
                <p style="font-size: 40px;">ğŸ—ï¸ â¡ï¸ ğŸšª</p>
                <p>Trouve la <strong>clÃ©</strong> pour ouvrir la porte !</p>
                <p>Collecte les <strong>piÃ¨ces ğŸª™</strong> pour des points !</p>
                <button onclick="closeTutorial()">C'est parti ! ğŸš€</button>
            </div>
        </div>

        <div id="message-box">
            <h2 id="msg-title" style="font-size: 50px; margin: 0;">Bravo !</h2>
            <p id="msg-text" style="font-size: 28px;">...</p>
            <p id="msg-coins" style="font-size: 20px; color: gold;"></p>
            <button class="big-btn btn-easy" id="msg-btn" onclick="nextLevelAction()">Continuer</button>
            <p class="space-hint" id="msg-hint">(ESPACE pour continuer)</p>
        </div>

        <div id="hall-of-fame" class="screen" style="display: none;">
            <h2 style="font-size: 48px; color: gold; margin: 0;">ğŸ† Hall of Fame</h2>
            <p id="hall-score" style="font-size: 26px; color: white; margin: 10px 0 20px;"></p>
            <ol id="hall-list" style="list-style: decimal; padding-left: 24px; text-align: left; color: white; font-size: 22px; max-width: 420px;"></ol>
            <div id="hall-form" style="margin-top: 20px;">
                <p style="font-size: 20px; color: rgba(255,255,255,0.9); margin-bottom: 10px;">Entre ton nom :</p>
                <input id="hall-name" type="text" maxlength="12" placeholder="LEO" style="padding: 8px 12px; font-size: 20px; border-radius: 10px; border: none; text-align: center;">
                <div style="margin-top: 15px;">
                    <button class="big-btn btn-easy" onclick="submitHallOfFame()">Enregistrer</button>
                </div>
            </div>
            <p id="hall-message" style="font-size: 18px; color: rgba(255,255,255,0.8); margin-top: 12px;"></p>
            <button class="big-btn btn-hard" style="margin-top: 20px;" onclick="returnToMenu()">ğŸ  Menu</button>
        </div>

        <div class="btn" id="btn-pause-mobile" onclick="togglePause()">â¸ï¸</div>

        <div id="controls">
            <!-- ContrÃ´les gauche (dÃ©placement) -->
            <div class="d-pad">
                <div class="btn" id="btn-climb">â†•ï¸</div>
                <div class="d-pad-left-row">
                    <div class="btn" id="btn-left">â†</div>
                    <div class="btn" id="btn-right">â†’</div>
                </div>
            </div>
            <!-- ContrÃ´les droite (saut) -->
            <div class="d-pad-right">
                <div class="btn" id="btn-jump">ğŸ¦˜</div>
            </div>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <!-- Scripts dans l'ordre de dÃ©pendance -->
    <script src="js/config.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/particles.js"></script>
    <script src="js/player.js"></script>
    <script src="js/fruity-frank.js"></script>
    <script src="js/levels.js"></script>
    <script src="js/game.js"></script>
    <script src="js/draw.js"></script>
    <script src="js/ui.js"></script>
    
    <!-- Initialisation -->
    <script>
        // DÃ©marrer le jeu quand tout est chargÃ©
        window.addEventListener('load', init);
    </script>
</body>
</html>
